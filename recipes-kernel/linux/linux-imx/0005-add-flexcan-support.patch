From b3d30ad83e4307fb324a62f073e725c27ddb5e8e Mon Sep 17 00:00:00 2001
From: Marina Calvo <mcalvo@rbz.es>
Date: Wed, 22 Dec 2021 08:59:58 +0000
Subject: [PATCH 5/5] add-flexcan-support

Signed-off-by: Marina Calvo <mcalvo@rbz.es>
---
 arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts | 26 ++++++++++++++++++++++
 1 file changed, 26 insertions(+)

diff --git a/arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts b/arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts
index 6cbf7beff851..66319f853777 100644
--- a/arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts
+++ b/arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts
@@ -121,6 +121,18 @@
 	};
 };
 
+&flexcan1 {
+    pinctrl-names = "default";
+    pinctrl-0 = <&pinctrl_flexcan1>;
+    status = "okay";
+};
+
+&flexcan2 {
+    pinctrl-names = "default";
+    pinctrl-0 = <&pinctrl_flexcan2>;
+    status = "okay";
+};
+
 &i2c1 {
     clock-frequency = <100000>;
     pinctrl-names = "default";
@@ -439,6 +451,20 @@
 		>;
 	};
 
+    pinctrl_flexcan1: flexcan1grp {
+        fsl,pins = <
+            MX8MP_IOMUXC_SAI5_RXD2__CAN1_RX     0x16
+            MX8MP_IOMUXC_SAI5_RXD1__CAN1_TX     0x16
+        >;
+    };
+	
+    pinctrl_flexcan2: flexcan2grp {
+		fsl,pins = <
+			MX8MP_IOMUXC_SAI5_MCLK__CAN2_RX		0x16
+			MX8MP_IOMUXC_SAI5_RXD3__CAN2_TX		0x16
+		>;
+	};
+
 	pinctrl_flexspi0: flexspi0grp {
 		fsl,pins = <
 			MX8MP_IOMUXC_NAND_ALE__FLEXSPI_A_SCLK		0x1c2
-- 
2.17.1

