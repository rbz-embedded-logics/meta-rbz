From a6353961b4deaf465202b0f84956ba6d2bb83f4d Mon Sep 17 00:00:00 2001
From: Marina Calvo <mcalvo@rbz.es>
Date: Tue, 21 Dec 2021 15:05:04 +0000
Subject: [PATCH 4/4] add-adc-ads7828-support

Signed-off-by: Marina Calvo <mcalvo@rbz.es>
---
 arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts | 6 +++++-
 arch/arm64/configs/imx_v8_defconfig        | 1 +
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts b/arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts
index b24751e6885f..6cbf7beff851 100644
--- a/arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts
+++ b/arch/arm64/boot/dts/rbz/mod-imx8m-plus.dts
@@ -140,7 +140,11 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_i2c3>;
 	status = "okay";
-
+  
+    ads7828: ads@48 {
+       compatible = "ti,ads7828";
+       reg = <0x48>;
+    };
 };
 
 &i2c4 {
diff --git a/arch/arm64/configs/imx_v8_defconfig b/arch/arm64/configs/imx_v8_defconfig
index 775fd503bd76..efa0c762c304 100644
--- a/arch/arm64/configs/imx_v8_defconfig
+++ b/arch/arm64/configs/imx_v8_defconfig
@@ -233,6 +233,7 @@ CONFIG_XEN_BLKDEV_BACKEND=m
 CONFIG_VIRTIO_BLK=y
 CONFIG_BLK_DEV_NVME=y
 CONFIG_SENSORS_FXOS8700=y
+CONFIG_SENSORS_ADS7828=y
 CONFIG_SENSORS_FXAS2100X=y
 CONFIG_SRAM=y
 CONFIG_PCI_ENDPOINT_TEST=y
-- 
2.17.1

